<app-navbar></app-navbar>

<div class="container">
  <div class="table-container">
    <div class="table-header">
      <h2>List of Book</h2>
      <p>Here are the books available in our library</p>
    </div>

    <!-- PageStatus.loading -->
    <div  *ngIf="pageStatus === PageStatus.loading">
      <p class="loading-p">
        Please wait for the books to load, it will take a moment.
      </p>
      <mat-spinner class="loading-page"></mat-spinner>
    </div>

    <!-- PageStatus.loaded -->
    <div *ngIf="pageStatus === PageStatus.loaded">
      <div class="containerAdd-button">
        <button mat-fab class="mat-fab-button" (click)="addNewBook()">
          <mat-icon>add</mat-icon>
        </button>
      </div>
      <!-- *ngIf="allBooks && allBooks.length" mat-table [dataSource]="allBooks" -->
      <table mat-table [dataSource]="allBooks" class="mat-elevation-z8">
        <!-- title Column -->
        <ng-container matColumnDef="title" >
          <th mat-header-cell *matHeaderCellDef class="header-cell"> Book </th>
          <td mat-cell *matCellDef="let element" class="content-cell"> {{element.title}} </td>
        </ng-container>

        <!-- author Column -->
        <ng-container matColumnDef="author">
          <th mat-header-cell *matHeaderCellDef class="header-cell" > Author </th>
          <td mat-cell *matCellDef="let element" class="content-cell"> {{element.author}} </td>
        </ng-container>

        <!-- dateOfPublication Column -->
        <ng-container matColumnDef="dateOfPublication">
          <th mat-header-cell *matHeaderCellDef class="header-cell" > Publication </th>
          <td mat-cell *matCellDef="let element" class="content-cell"> {{element.dateOfPublication}} </td>
        </ng-container>

        <!-- Genre Column -->
        <ng-container matColumnDef="genre">
          <th mat-header-cell *matHeaderCellDef class="header-cell" > Genre </th>
          <td mat-cell *matCellDef="let element" class="content-cell"> {{element.genre}} </td>
        </ng-container>

        <!-- Action Column -->
        <ng-container matColumnDef="action">
          <th mat-header-cell *matHeaderCellDef class="header-cell"> Action </th>
          <td mat-cell *matCellDef="let element" class="content-cell">
            <!-- (click)="editBook(element.codISBN)" -->
            <button (click)="editBook(element.codISBN)">
              <mat-icon>
                <img src="assets/editIcon.svg" alt="edit icon">
              </mat-icon>
            </button>
            <button (click)="deleteBook(element.codISBN)">
              <mat-icon>
                <img src="assets/trashIcon.svg" alt="delete icon">
              </mat-icon>
            </button>
          </td>
        </ng-container>

        <tr mat-header-row *matHeaderRowDef="displayedColumns" class="header-row"></tr>
        <tr mat-row *matRowDef="let element; let i = index; columns: displayedColumns;"
            [ngClass]="{'alternate-row': i % 2 == 0}">
      </table>
    </div>

    <!-- PageStatus.error -->
    <div *ngIf="pageStatus === PageStatus.error">
      <div class="error-message">
        <mat-icon matSuffix>sentiment_very_dissatisfied</mat-icon>
        <p>
          Oops, an error occurred while loading the books,<br>
          please try reloading the page.
        </p>
        <button mat-raised-button type="button" (click)="getAllBooks()">
          Reload page
          <mat-icon matSuffix>refresh</mat-icon>
        </button>
      </div>
    </div>


  </div>
</div>


